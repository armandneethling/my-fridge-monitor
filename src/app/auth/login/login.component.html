<ion-header>
  <ion-toolbar>
    <ion-title>Login</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <div *ngIf="step === 'username'">
    <ion-item>
      <ion-label position="floating">Name</ion-label>
      <ion-input type="text" [(ngModel)]="username" autocomplete="off" [disabled]="loading"></ion-input>
    </ion-item>
    <ion-button expand="block" (click)="onUsernameSubmit()" [disabled]="loading" class="ion-margin-top">
      Next
    </ion-button>
  </div>

  <div *ngIf="step === 'passkey'">
    <ion-item>
      <ion-label position="floating">Manager Code</ion-label>
      <ion-input type="password" [(ngModel)]="passkey" autocomplete="off" [disabled]="loading"></ion-input>
    </ion-item>
    <ion-button expand="block" (click)="onPasskeySubmit()" [disabled]="loading" class="ion-margin-top">
      Login
    </ion-button>
    <ion-button fill="clear" expand="block" (click)="step = 'username'; passkey = ''" [disabled]="loading">
      Back
    </ion-button>
    <ion-button fill="clear" size="small" (click)="sendResetEmail()" [disabled]="loading">
      Forgot Passkey?
    </ion-button>
  </div>

  <div *ngIf="step === 'setPasskey'">
    <ion-item>
      <ion-label position="floating">Set Manager Code</ion-label>
      <ion-input type="password" [(ngModel)]="passkey" autocomplete="off" [disabled]="loading"></ion-input>
    </ion-item>
    <ion-button expand="block" (click)="onPasskeySubmit()" [disabled]="loading" class="ion-margin-top">
      Register
    </ion-button>
    <ion-button fill="clear" expand="block" (click)="step = 'username'; passkey = ''" [disabled]="loading">
      Back
    </ion-button>
  </div>
</ion-content>
